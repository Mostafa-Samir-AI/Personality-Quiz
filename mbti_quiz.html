<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الشخصية</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* General Styles */
        body {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #F5F5DC; /* Beige background */
            color: #1C2526; /* Navy blue text */
            transition: all 0.3s ease-in-out;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #F5F5F5; /* Light gray container */
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
        }
        h1, h2, h3 {
            color: #8B4513; /* Brown headers */
            margin: 15px 0;
        }
        /* Name Input Section */
        #name-input {
            text-align: center;
            margin: 20px 0;
        }
        #user-name {
            padding: 10px;
            margin: 10px;
            border: 1px solid #1C2526; /* Navy blue border */
            border-radius: 5px;
            font-family: 'Cairo', sans-serif;
            width: 80%;
            max-width: 300px;
        }
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            background: #E0E0E0;
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        #progress {
            width: 0;
            height: 100%;
            background: #FFD700; /* Gold progress */
            border-radius: 5px;
            transition: width 0.5s ease-in-out;
        }
        /* Quiz Container */
        #quiz-container {
            display: none;
        }
        .question {
            margin: 20px 0;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .question.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            padding: 15px;
            background: #FFD700; /* Gold buttons */
            color: #1C2526; /* Navy blue text */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: background 0.3s ease-in-out, transform 0.2s ease-in-out;
        }
        .option:hover {
            background: #8B4513; /* Brown on hover */
            color: #F5F5F5; /* Light gray text */
            transform: scale(1.03);
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            background-color: #F5F5F5; /* Light gray modal */
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #1C2526; /* Navy blue border */
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
            position: relative;
            overflow-y: auto;
            max-height: 80vh;
        }
        .modal-content.show {
            transform: translateY(0);
            opacity: 1;
        }
        .close {
            color: #8B4513; /* Brown close button */
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease-in-out;
        }
        .close:hover,
        .close:focus {
            color: #1C2526; /* Navy blue on hover */
        }
        .character-image {
            max-width: 200px;
            height: auto;
            margin: 10px auto;
            border-radius: 10px;
            display: block;
        }
        .strengths, .weaknesses, .traits, .values {
            margin: 15px 0;
        }
        .tag {
            display: inline-block;
            background: #1C2526; /* Navy blue tags */
            color: #F5F5F5; /* Light gray text */
            padding: 5px 10px;
            margin: 5px;
            border-radius: 5px;
            font-size: 14px;
        }
        /* Night Sky Animation */
        #night-sky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1C1C1C;
            z-index: -1;
            display: none;
        }
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        @keyframes twinkle {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        /* Dark Theme Styles */
        body.dark-theme {
            background-color: #1C1C1C;
        }
        body.dark-theme .container {
            background-color: #2C2C2C;
            color: #F5F5F5;
        }
        body.dark-theme h1, body.dark-theme h2, body.dark-theme h3 {
            color: #FFD700; /* Gold headers */
        }
        body.dark-theme .option {
            background: #4C4C4C;
            color: #F5F5F5;
        }
        body.dark-theme .option:hover {
            background: #FFD700;
            color: #1C2526;
        }
        body.dark-theme .modal-content {
            background-color: #3C3C3C;
            color: #F5F5F5;
        }
        body.dark-theme .close {
            color: #FFD700;
        }
        body.dark-theme .close:hover {
            color: #F5F5F5;
        }
        body.dark-theme .tag {
            background: #FFD700;
            color: #1C2526;
        }
        body.dark-theme .progress-bar {
            background: #4C4C4C;
        }
        body.dark-theme #progress {
            background: #FFD700;
        }
        body.dark-theme #user-name {
            background: #3C3C3C;
            color: #F5F5F5;
            border-color: #FFD700;
        }
        /* Modal Open */
        body.modal-open {
            overflow: hidden;
        }
        /* Responsive Design */
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            .option {
                padding: 12px;
                font-size: 16px;
            }
            .modal-content {
                width: 90%;
                margin: 15% auto;
                padding: 15px;
            }
            .character-image {
                max-width: 150px;
            }
            .tag {
                font-size: 12px;
            }
            #user-name {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div id="night-sky"></div>
    <button id="theme-toggle" style="position: fixed; top: 10px; right: 10px; z-index: 1001; background: none; border: none; font-size: 24px; cursor: pointer;">
        <i id="theme-icon" class="fas fa-moon"></i>
    </button>
    <div class="container">
        <h1>اختبار الشخصية</h1>
        <div id="name-input">
            <h2>ما هو اسمك؟</h2>
            <input type="text" id="user-name" placeholder="اكتب اسمك هنا">
            <button class="option" onclick="startQuiz()">ابدأ الاختبار</button>
        </div>
        <div class="progress-bar">
            <div id="progress"></div>
        </div>
        <div id="quiz-container"></div>
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">×</span>
                <div id="modal-result"></div>
            </div>
        </div>

    <script>
        let currentQuestion = 0;
        const answers = new Array(12).fill(null); // 12 questions

        const questions = [
            {
                question: { ar: "عندما تواجه تحديًا، أنت:" },
                options: [
                    { ar: "تتخذ إجراءً فوريًا", character: "Mulan" },
                    { ar: "تفكر بعناية وتخطط", character: "Ariadne" },
                    { ar: "تبحث عن الحكمة والإرشاد", character: "Isis" }
                ]
            },
            {
                question: { ar: "في مجموعة، تفضل أن:" },
                options: [
                    { ar: "تقود بالمثال", character: "Mulan" },
                    { ar: "تقدم نصائح استراتيجية", character: "Ariadne" },
                    { ar: "تدعم وترعى الآخرين", character: "Isis" }
                ]
            },
            {
                question: { ar: "نهجك في التعلم هو:" },
                options: [
                    { ar: "عملي وتطبيقي", character: "Mulan" },
                    { ar: "نظري ومفاهيمي", character: "Ariadne" },
                    { ar: "حدسي وبصير", character: "Isis" }
                ]
            },
            {
                question: { ar: "عند اتخاذ القرارات، تعتمد على:" },
                options: [
                    { ar: "الشجاعة والمبادرة", character: "Mulan" },
                    { ar: "التحليل العميق", character: "Ariadne" },
                    { ar: "الحكمة الداخلية", character: "Isis" }
                ]
            },
            {
                question: { ar: "في وجه الشدائد، أنت:" },
                options: [
                    { ar: "تواجهها بجرأة", character: "Mulan" },
                    { ar: "تجد حلولًا ذكية", character: "Ariadne" },
                    { ar: "تبحث عن التوازن والانسجام", character: "Isis" }
                ]
            },
            {
                question: { ar: "عند مساعدة الآخرين، أنت:" },
                options: [
                    { ar: "تقدم حلولًا عملية", character: "Mulan" },
                    { ar: "تقدم أفكارًا مبتكرة", character: "Ariadne" },
                    { ar: "تقدم دعمًا عاطفيًا وروحيًا", character: "Isis" }
                ]
            },
            {
                question: { ar: "في العمل، تفضل:" },
                options: [
                    { ar: "إنجاز المهام بكفاءة", character: "Mulan" },
                    { ar: "التخطيط والتحليل", character: "Ariadne" },
                    { ar: "خلق بيئة داعمة", character: "Isis" }
                ]
            },
            {
                question: { ar: "عند التفكير في المستقبل، أنت:" },
                options: [
                    { ar: "تركز على أهداف عملية", character: "Mulan" },
                    { ar: "تتخيل إمكانيات جديدة", character: "Ariadne" },
                    { ar: "تسعى لتحقيق رؤية", character: "Isis" }
                ]
            },
            {
                question: { ar: "في الأزمات، أنت:" },
                options: [
                    { ar: "تتصرف بسرعة وحسم", character: "Mulan" },
                    { ar: "تفكر في حلول إبداعية", character: "Ariadne" },
                    { ar: "تحافظ على الهدوء والحكمة", character: "Isis" }
                ]
            },
            {
                question: { ar: "عند العمل في فريق، أنت:" },
                options: [
                    { ar: "تتولى القيادة", character: "Mulan" },
                    { ar: "تقدم رؤى استراتيجية", character: "Ariadne" },
                    { ar: "تعزز التعاون", character: "Isis" }
                ]
            },
            {
                question: { ar: "في وقت فراغك، تستمتع ب:" },
                options: [
                    { ar: "الأنشطة البدنية", character: "Mulan" },
                    { ar: "استكشاف أفكار جديدة", character: "Ariadne" },
                    { ar: "التأمل والاسترخاء", character: "Isis" }
                ]
            },
            {
                question: { ar: "عند مواجهة الفشل، أنت:" },
                options: [
                    { ar: "تحاول مرة أخرى بعزيمة", character: "Mulan" },
                    { ar: "تحلل وتبتكر", character: "Ariadne" },
                    { ar: "تتعلم وتنمو بحكمة", character: "Isis" }
                ]
            }
        ];

        // Create stars for night sky
        function createStars() {
            const nightSky = document.getElementById('night-sky');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                nightSky.appendChild(star);
            }
        }
        createStars();

        // Theme Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const nightSky = document.getElementById('night-sky');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');
            if (document.body.classList.contains('dark-theme')) {
                nightSky.style.display = 'block';
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                nightSky.style.display = 'none';
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        });

        function startQuiz() {
            const userName = document.getElementById('user-name').value;
            if (userName.trim() === '') {
                alert('يرجى إدخال اسمك');
                return;
            }
            localStorage.setItem('userName', userName);
            document.getElementById('name-input').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            createQuiz();
        }

        function createQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            const question = questions[currentQuestion];
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `<h3>${question.question.ar}</h3><div class="options"></div>`;
            const optionsDiv = questionDiv.querySelector('.options');
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option';
                button.textContent = option.ar;
                button.addEventListener('click', () => {
                    answers[currentQuestion] = option.character;
                    currentQuestion++;
                    if (currentQuestion < questions.length) {
                        createQuiz();
                    } else {
                        submitQuiz();
                    }
                });
                optionsDiv.appendChild(button);
            });
            
            container.appendChild(questionDiv);
            
            setTimeout(() => {
                questionDiv.classList.add('visible');
            }, 100);
            
            const progress = (currentQuestion / questions.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        function submitQuiz() {
            const counts = { Mulan: 0, Ariadne: 0, Isis: 0 };
            answers.forEach(answer => {
                if (answer in counts) {
                    counts[answer]++;
                }
            });
            
            let maxCount = 0;
            let resultCharacter = '';
            for (const [character, count] of Object.entries(counts)) {
                if (count > maxCount) {
                    maxCount = count;
                    resultCharacter = character;
                }
            }
            
            const characterData = {
                Mulan: {
                    name: "⚔️ مولان",
                    description: `قوتك، ${localStorage.getItem('userName')}، تشبه مولان في شجاعتك وتصميمك. أنت شخص عملي، تفضل اتخاذ الإجراءات لحل المشكلات، وتتميز بروح المبادرة والقدرة على مواجهة التحديات بثقة. كمولان، أنت مستعد لتحدي التقاليد من أجل ما تؤمن به، وتظهر ولاءً قويًا لعائلتك وأصدقائك، مما يجعلك قائدًا طبيعيًا في الأوقات الصعبة.`,
                    strengths: ["شجاعة", "تصميم", "عملية", "مبادرة"],
                    weaknesses: ["تسرع", "عناد"],
                    traits: ["مغامرة", "مستقلة", "قوية الإرادة", "مخلصة"],
                    values: ["الشرف", "الولاء", "الشجاعة"],
                    image: "/workspaces/Personality-Quiz/image bank/mulan.png"
                },
                Ariadne: {
                    name: "🧵 أريادني",
                    description: `قوتك، ${localStorage.getItem('userName')}، تشبه أريادني في ذكائك وإبداعك. أنت تفكر بعمق وتبتكر حلولًا إبداعية للمشكلات، مستخدمًا التخطيط الاستراتيجي لتحقيق أهدافك. مثل أريادني التي ساعدت ثيسيوس في الخروج من المتاهة، أنت تتمتع بقدرة فريدة على رؤية الحلول حيث يفشل الآخرون، وتلهم من حولك بأفكارك المبتكرة.`,
                    strengths: ["ذكاء", "إبداع", "تخطيط", "حل المشكلات"],
                    weaknesses: ["تردد", "انعزالية"],
                    traits: ["مبتكرة", "تحليلية", "مبدعة", "صبورة"],
                    values: ["الإبداع", "المعرفة", "الابتكار"],
                    image: "/workspaces/Personality-Quiz/image bank/ariadne.png"
                },
                Isis: {
                    name: "✨ إيزيس",
                    description: `قوتك، ${localStorage.getItem('userName')}، تشبه إيزيس في حكمتك ورعايتك. أنت تهتم بالآخرين وتسعى للحفاظ على الانسجام والتوازن، مستخدمًا بصيرتك لتوجيه الآخرين. كإيزيس، الإلهة المصرية للحكمة والحماية، أنت مصدر إلهام لمن حولك، تقدم الدعم العاطفي والروحي، وتتمتع بحضور هادئ يبعث على الطمأنينة.`,
                    strengths: ["حكمة", "رعاية", "تعاطف", "بصيرة"],
                    weaknesses: ["سيطرة", "توقعات عالية"],
                    traits: ["رحيمة", "حدسية", "داعمة", "ملهمة"],
                    values: ["الرحمة", "الانسجام", "الحكمة"],
                    image: "/workspaces/Personality-Quiz/image bank/isis.png"
                }
            };
            
            const data = characterData[resultCharacter];
            const modal = document.getElementById('modal');
            const modalContent = document.querySelector('.modal-content');
            const modalResult = document.getElementById('modal-result');
            modalResult.innerHTML = `
                <h2>قوتك تشبه ${data.name}</h2>
                <img src="${data.image}" alt="${data.name}" class="character-image" />
                <p>${data.description}</p>
                <div class="strengths"><h3>نقاط القوة:</h3>${data.strengths.map(s => `<span class="tag">${s}</span>`).join('')}</div>
                <div class="weaknesses"><h3>نقاط الضعف:</h3>${data.weaknesses.map(w => `<span class="tag">${w}</span>`).join('')}</div>
                <div class="traits"><h3>السمات الشخصية:</h3>${data.traits.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                <div class="values"><h3>القيم الأساسية:</h3>${data.values.map(v => `<span class="tag">${v}</span>`).join('')}</div>
            `;
            document.body.classList.add('modal-open');
            modal.style.display = 'block';
            modal.style.opacity = 1;
            setTimeout(() => {
                modalContent.classList.add('show');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            const modalContent = document.querySelector('.modal-content');
            modalContent.classList.remove('show');
            setTimeout(() => {
                modal.style.opacity = 0;
                modal.style.display = 'none';
                document.body.classList.remove('modal-open');
            }, 500);
        }

        window.addEventListener('click', (event) => {
            if (event.target == document.getElementById('modal')) {
                closeModal();
            }
        });
    </script>
</body>
</html>
